"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Generated by Butterfly TypeScript converter - this file will be overwritten.
// File: observables/ObservableProperty.ext.shared.kt
// Package: com.lightningkite.butterfly.observables
const rxjs_1 = require("rxjs");
const TransformedObservableProperty_shared_1 = require("./TransformedObservableProperty.shared");
const KotlinCollections_1 = require("../KotlinCollections");
const Language_1 = require("../kotlin/Language");
const operators_1 = require("rxjs/operators");
const WriteAddedObservableProperty_shared_1 = require("./WriteAddedObservableProperty.shared");
//! Declares com.lightningkite.butterfly.observables.observable>com.lightningkite.butterfly.observables.ObservableProperty<kotlin.Any>
function xObservablePropertyObservableGet(this_) {
    return rxjs_1.concat(new rxjs_1.Observable((it) => {
        it.next(this_.value);
        it.complete();
    }), this_.onChange);
}
exports.xObservablePropertyObservableGet = xObservablePropertyObservableGet;
//! Declares com.lightningkite.butterfly.observables.observableNN>com.lightningkite.butterfly.observables.ObservableProperty<kotlin.Any>
function xObservablePropertyObservableNNGet(this_) {
    return rxjs_1.concat(new rxjs_1.Observable((it) => {
        it.next(this_.value);
        it.complete();
    }), this_.onChange).pipe(operators_1.map((it) => it));
}
exports.xObservablePropertyObservableNNGet = xObservablePropertyObservableNNGet;
//! Declares com.lightningkite.butterfly.observables.onChangeNN>com.lightningkite.butterfly.observables.ObservableProperty<kotlin.Any>
function xObservablePropertyOnChangeNNGet(this_) { return this_.onChange.pipe(operators_1.map((it) => it)); }
exports.xObservablePropertyOnChangeNNGet = xObservablePropertyOnChangeNNGet;
//! Declares com.lightningkite.butterfly.observables.subscribeBy>com.lightningkite.butterfly.observables.ObservableProperty<kotlin.Any>
function xObservablePropertySubscribeBy(this_, onError = (it) => {
    Language_1.printStackTrace(it);
}, onComplete = () => { }, onNext = (it) => { }) {
    return xObservablePropertyObservableGet(this_).subscribe((boxed) => {
        onNext(boxed);
    }, onError, onComplete);
}
exports.xObservablePropertySubscribeBy = xObservablePropertySubscribeBy;
//! Declares com.lightningkite.butterfly.observables.includes
function includes(collection, element) {
    return WriteAddedObservableProperty_shared_1.xObservablePropertyWithWrite(TransformedObservableProperty_shared_1.xObservablePropertyMap(collection, (it) => it.has(element)), (it) => {
        if (it) {
            collection.value = new KotlinCollections_1.EqualOverrideSet([...collection.value, element]);
        }
        else {
            collection.value = new KotlinCollections_1.EqualOverrideSet([...collection.value].filter(x => x !== element));
        }
    });
}
exports.includes = includes;
//! Declares com.lightningkite.butterfly.observables.whileActive>com.lightningkite.butterfly.observables.ObservableProperty<kotlin.Boolean>
function xObservablePropertyWhileActive(this_, action) {
    let current = null;
    return xObservablePropertySubscribeBy(this_, undefined, undefined, (it) => {
        if (it) {
            if (current === null) {
                current = action();
            }
        }
        else {
            const temp76 = current;
            if (temp76 !== null) {
                temp76.unsubscribe();
            }
            ;
            current = null;
        }
    });
}
exports.xObservablePropertyWhileActive = xObservablePropertyWhileActive;
//# sourceMappingURL=ObservableProperty.ext.shared.js.map