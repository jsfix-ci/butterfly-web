"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Generated by Butterfly TypeScript converter
// File: observables/binding/CompoundButton.binding.kt
// Package: com.lightningkite.butterfly.observables.binding
const ObservableProperty_ext_1 = require("../ObservableProperty.ext");
const DisposeCondition_ext_1 = require("../../rx/DisposeCondition.ext");
const Language_1 = require("../../kotlin/Language");
let runtimeGeneratedId = 0;
function fixInput(i) {
    const p = i.parentElement;
    if (p instanceof HTMLLabelElement) {
        let gen = `runtime_gen_${runtimeGeneratedId++}`;
        i.id = gen;
        p.htmlFor = gen;
    }
}
//! Declares com.lightningkite.butterfly.observables.binding.bindSelect>android.widget.CompoundButton
function xCompoundButtonBindSelect(this_, value, observable) {
    fixInput(this_);
    DisposeCondition_ext_1.xDisposableUntil(ObservableProperty_ext_1.xObservablePropertySubscribeBy(observable, undefined, undefined, (it) => {
        const shouldBeChecked = Language_1.safeEq(it, value);
        if (!(this_.checked === shouldBeChecked)) {
            this_.checked = shouldBeChecked;
        }
    }), DisposeCondition_ext_1.xViewRemovedGet(this_));
    this_.onchange = ((ev) => {
        const isChecked = this_.checked;
        if (isChecked && !(Language_1.safeEq(observable.value, value))) {
            observable.value = value;
        }
        else if (!isChecked && Language_1.safeEq(observable.value, value)) {
            this_.checked = true;
        }
    });
}
exports.xCompoundButtonBindSelect = xCompoundButtonBindSelect;
//! Declares com.lightningkite.butterfly.observables.binding.bindSelectNullable>android.widget.CompoundButton
function xCompoundButtonBindSelectNullable(this_, value, observable) {
    fixInput(this_);
    DisposeCondition_ext_1.xDisposableUntil(ObservableProperty_ext_1.xObservablePropertySubscribeBy(observable, undefined, undefined, (it) => {
        const shouldBeChecked = Language_1.safeEq(it, value);
        if (!(this_.checked === shouldBeChecked)) {
            this_.checked = shouldBeChecked;
        }
    }), DisposeCondition_ext_1.xViewRemovedGet(this_));
    this_.onchange = ((ev) => {
        const isChecked = this_.checked;
        if (isChecked && !(Language_1.safeEq(observable.value, value))) {
            observable.value = value;
        }
        else if (!isChecked && Language_1.safeEq(observable.value, value)) {
            observable.value = null;
        }
    });
}
exports.xCompoundButtonBindSelectNullable = xCompoundButtonBindSelectNullable;
//! Declares com.lightningkite.butterfly.observables.binding.bindSelectInvert>android.widget.CompoundButton
function xCompoundButtonBindSelectInvert(this_, value, observable) {
    fixInput(this_);
    let suppress = false;
    DisposeCondition_ext_1.xDisposableUntil(ObservableProperty_ext_1.xObservablePropertySubscribeBy(observable, undefined, undefined, (it) => {
        if (!suppress) {
            suppress = true;
            const shouldBeChecked = Language_1.safeEq(it, value) || Language_1.safeEq(it, null);
            if (!(this_.checked === shouldBeChecked)) {
                this_.checked = shouldBeChecked;
            }
            suppress = false;
        }
    }), DisposeCondition_ext_1.xViewRemovedGet(this_));
    this_.onchange = ((ev) => {
        const isChecked = this_.checked;
        if (!suppress) {
            suppress = true;
            if (!isChecked && Language_1.safeEq(observable.value, value)) {
                observable.value = null;
                this_.checked = true;
            }
            else if (!(Language_1.safeEq(observable.value, value))) {
                observable.value = value;
                this_.checked = true;
            }
            suppress = false;
        }
    });
}
exports.xCompoundButtonBindSelectInvert = xCompoundButtonBindSelectInvert;
//! Declares com.lightningkite.butterfly.observables.binding.bind>android.widget.CompoundButton
function xCompoundButtonBind(this_, observable) {
    fixInput(this_);
    DisposeCondition_ext_1.xDisposableUntil(ObservableProperty_ext_1.xObservablePropertySubscribeBy(observable, undefined, undefined, (it) => {
        if (!(it === this_.checked)) {
            this_.checked = it;
        }
    }), DisposeCondition_ext_1.xViewRemovedGet(this_));
    this_.onchange = ((ev) => {
        const isChecked = this_.checked;
        if (!(observable.value === isChecked)) {
            observable.value = isChecked;
        }
    });
}
exports.xCompoundButtonBind = xCompoundButtonBind;
//# sourceMappingURL=CompoundButton.binding.js.map